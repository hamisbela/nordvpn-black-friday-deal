---
interface Props {
  title: string;
  description: string;
}

const { title, description } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{title}</title>
  </head>
  <body class="bg-gray-50">
    <slot />

    <!-- Exit Intent Popup -->
    <div id="exitPopup" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
      <div class="bg-white p-6 rounded-lg max-w-xl mx-auto relative">
        <button 
          id="closePopup"
          class="absolute top-2 right-2 text-gray-500 hover:text-gray-700"
          aria-label="Close popup"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
        <img 
          src="/images/banner.jpg" 
          alt="NordVPN Black Friday Special Offer" 
          class="w-full h-auto mb-4"
          onerror="this.style.display='none'"
        />
        <div class="text-center">
          <h3 class="text-xl font-bold mb-2">ðŸ”’ Exclusive Black Friday VPN Deal!</h3>
          <p class="mb-4">Save 73% + Get 3 months FREE with NordVPN's biggest offer!</p>
          <a href="https://go.nordvpn.net/aff_c?offer_id=15&aff_id=92957&source=lp" 
             class="inline-block bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 transition-colors">
            Claim Black Friday Offer
          </a>
        </div>
      </div>
    </div>

    <script>
      // Exit intent and timer popup implementation
      window.addEventListener('load', function() {
        const popup = document.getElementById('exitPopup');
        const closeBtn = document.getElementById('closePopup');
        let showPopup = true;

        // Show popup after 30 seconds
        setTimeout(() => {
          if (showPopup) {
            popup.classList.remove('hidden');
          }
        }, 30000);

        // Exit intent detection
        document.addEventListener('mouseleave', (e) => {
          if (e.clientY <= 0 && showPopup) {
            popup.classList.remove('hidden');
          }
        });

        // Close popup when clicking outside or on close button
        popup.addEventListener('click', function(e) {
          if (e.target === this) {
            this.classList.add('hidden');
            showPopup = false;
          }
        });

        closeBtn.addEventListener('click', function() {
          popup.classList.add('hidden');
          showPopup = false;
        });
      });
    </script>
  </body>
</html>